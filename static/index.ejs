<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Reportify</title>
        <link rel="stylesheet" href="/index.css">
        <link rel="stylesheet" href="/nav.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <!--Import Google Fonts-->
        <link rel="preconnect" href="https://fonts.googleapis.com"> 
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
    </head>

    <body style="background-color: #00000083;">
        <div class="navbar">
          <a id="logo-holder" href="/">
            <img src="images/Reportify.png" height="300" alt="" loading="lazy">
          </a>
          
          <div class="hamburger">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
          </div>
          <nav class="nav-bar">
            <ul>
              <li><a href="/" class="active">Home</a></li>
              <li><a href="">Catégories</a></li>
              <li><a href="/report">Review</a></li>
              <li><a href="#basdepage">Contact</a></li>
              <li>
                <h4 id="name-holder">
                  <% if(user){ %>
                    <a> <%= user.username %> </a>
                  <% } else{ %>  
                    <a href="/auth">Login</a>
                  <% } %>
                </h4>
              </li>
            </ul>
            <!--<div class="search-container">
              <form action="/search/process" method="post">
                <input class="search-input" type="text" placeholder="search" name="keyword" value=''>
                <button type="submit"><i class="fa fa-search"></i></button>
              </form>
            </div>-->
          </nav>
        </div>

        <script src="navbar/navbar.js"></script>
        <!--<p class="date-holder" id="date-holder"></p>-->
        <div class="page" >
          <!--
          <div class="row" id="premier-element">
            <div class="column">
              <h2>Chanson</h2>
              <% for(var i=0; i < songs.length; i++) { %>
                <p><%= songs[i].description %></p>
              <% } %>
            </div>
            <div class="column">
              <h2>Avis</h2>
              <% for(var i=0; i < songs.length; i++) { %>
                <p><%= songs[i].address %></p>
              <% } %>
            </div>
            <div class="column">
              <h2>Rapporté par</h2>
              <% for(var i=0; i < repusers.length; i++) { %>
                <p><%= repusers[i] %></p>
              <% } %>
            </div>
            <div class="column">
              <h2>Date</h2>
              <% for(var i=0; i < songs.length; i++) { %>
                <p><%= songs[i].createdAt %></p>
              <% } %>
            </div>
          </div>-->
          <div id='status' class='invisible'><%= errormessage %></div>
            <% if(user){ %>
            <div class="cadre1">

              <div class="chart1"> 
              <canvas id="myChart" height="250" width="350"></canvas>
            
              <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
              <script>
              </script>
              <script>
                    var data = <%- JSON.stringify(data)%>;
                    const ctx = document.getElementById('myChart');
                    new Chart(ctx, {
                      type: 'radar',
                      data: {
                        labels: ["Pop", "Rap", "Jazz", "Classique", "Rap", "RnB", "Electro"],
                        datasets: [
                        {
                          label: 'Average Rating',
                          data: data,
                          fill: true,
                          backgroundColor: 'rgba(255, 99, 132, 0.2)',
                          borderColor: 'rgb(255, 99, 132)',
                          pointBackgroundColor: '#FFFFFF',
                          pointBorderColor: '#FFFFFF',
                          pointHoverBackgroundColor: '#FFFFFF',
                          pointHoverBorderColor: '#FFFFFF'
                        }]
                      },
                      options: {
                        elements: {
                          line: {
                            borderWidth: 3
                          }
                        }
                      }
                    });
              </script>
              </div>
            </div>
            <div class="cadre2">
              <script>
              const ctx = document.getElementById('myChart').getContext('2d');
              new Chart(ctx, {
                type: 'pie',
                data: {
                  labels: ['Label 1', 'Label 2', 'Label 3', 'Label 4', 'Label 5', 'Label 6', 'Label 7'],
                  datasets: [{
                    data: [5.333333333333333, 1, 0, 10, 0, 3, 7],
                  }]
                }
              });
            </script>
            </div>
            
              <div>
                <center><button onclick="window.location.href='/report';" class="button1">Nouvelle Chanson</button></center>
              </div>
          
            <% }else{ %>
              <h2 class="h2-not-users">Afin de noter vos propres musiques, veuillez vous connecter ou créer un compte</h2>
              <div class="cadre1"><h1>?</h1></div>
              <div class="cadre2"><h1>?</h1></div>
            <% } %>

            <footer>
              <a name="basdepage"></a>
              <ul>
                <li>Thomas Geyens: thomas.geyens@student.uclouvain.be</li>
                <li>Arthur Remience: arthur.remience@student.uclouvain.be</li>
                <li>Loris Dognaux: loris.dognaux@student.uclouvain.be</li>
              </ul>
          </footer>
          
        </div>
    </body>

    <script>
      if(document.getElementById('status').innerHTML!='')
      {
        alert(document.getElementById('status').innerHTML);
      }

      const d = new Date();
      document.getElementById('date-holder').innerHTML = "Date actuelle: " + d.getDate() + "-" + (d.getMonth()+1) + "-" + d.getFullYear();
    </script>
</html>
